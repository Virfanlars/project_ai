2025-04-14 23:14:31,127 - __main__ - INFO - ================================================================================
2025-04-14 23:14:31,127 - __main__ - INFO - 脓毒症早期预警系统 - 开始执行
2025-04-14 23:14:31,127 - __main__ - INFO - 基于MIMIC-IV大型临床数据库的真实数据分析
2025-04-14 23:14:31,127 - __main__ - INFO - ================================================================================
2025-04-14 23:14:31,130 - __main__ - INFO - 运行参数: Namespace(sample=False, epochs=100, batch_size=64, skip_db=True, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-04-14 23:14:31,195 - __main__ - INFO - 系统信息: Windows 11 AMD64
2025-04-14 23:14:31,195 - __main__ - INFO - 检查环境设置...
2025-04-14 23:14:33,458 - __main__ - INFO - Python版本: 3.12.8
2025-04-14 23:14:33,459 - __main__ - INFO - PyTorch版本: 2.6.0+cu118
2025-04-14 23:14:34,907 - __main__ - INFO - GPU可用: NVIDIA GeForce RTX 3060 Laptop GPU
2025-04-14 23:14:34,907 - __main__ - INFO - 检测到psycopg2已安装
2025-04-14 23:14:34,909 - __main__ - INFO - 尝试直接检查数据库连接...
2025-04-14 23:14:34,909 - __main__ - INFO - 尝试连接数据库: 172.16.3.67:5432/mimiciv
2025-04-14 23:14:35,137 - __main__ - INFO - 数据库连接测试成功
2025-04-14 23:14:35,203 - __main__ - INFO - MIMIC-IV数据库中的病人数量: 364,627
2025-04-14 23:14:35,203 - __main__ - INFO - 开始从MIMIC-IV中提取临床数据...
2025-04-14 23:14:35,204 - __main__ - INFO - 执行任务: 提取临床数据
2025-04-14 23:14:40,018 - __main__ - INFO - 命令成功完成: python -m scripts.data_extraction_main  (耗时: 4.81秒)
2025-04-14 23:14:40,022 - __main__ - INFO - 开始训练脓毒症预测模型...
2025-04-14 23:14:40,023 - __main__ - INFO - 开始生成可视化和报告...
2025-04-14 23:14:40,023 - __main__ - INFO - 执行任务: 生成可视化和报告
2025-04-14 23:14:44,453 - __main__ - INFO - 命令成功完成: python run_visualization.py (耗时: 4.43秒)
2025-04-14 23:14:44,453 - __main__ - INFO - 输出: 2025-04-14 23:14:41,948 - __main__ - INFO - ŧ��֢����Ԥ��ϵͳ���ӻ���ʼ
2025-04-14 23:14:44,454 - __main__ - INFO - 生成的可视化文件: results/sepsis_prediction_results.html (4.42 KB)
2025-04-14 23:14:44,455 - __main__ - INFO - 生成的可视化文件: results/figures/roc_curve.png (129.93 KB)
2025-04-14 23:14:44,455 - __main__ - INFO - 生成的可视化文件: results/figures/risk_trajectories.png (333.66 KB)
2025-04-14 23:14:44,456 - __main__ - INFO - 生成的可视化文件: results/figures/confusion_matrix.png (89.21 KB)
2025-04-14 23:14:44,456 - __main__ - INFO - 生成的可视化文件: results/figures/feature_importance.png (137.88 KB)
2025-04-14 23:14:44,457 - __main__ - INFO - 开始分析模型性能和结果...
2025-04-14 23:14:44,457 - __main__ - INFO - 执行任务: 分析模型结果
2025-04-14 23:14:44,534 - __main__ - INFO - 开始验证系统完整性...
2025-04-14 23:14:44,535 - __main__ - INFO - 脓毒症早期预警系统 - 执行完成，总耗时: 0.22 分钟
2025-04-14 23:14:44,535 - __main__ - INFO - 生成的关键文件:
2025-04-14 23:14:44,535 - __main__ - WARNING - - data/processed/patient_features.csv
2025-04-14 23:14:44,535 - __main__ - WARNING - - data/processed/sepsis_labels.csv
2025-04-14 23:14:44,535 - __main__ - WARNING - - models/best_model.pt
2025-04-14 23:14:44,535 - __main__ - WARNING - - results/predictions.csv
2025-04-14 23:14:44,536 - __main__ - INFO - - results/figures/roc_curve.png
2025-04-14 23:14:44,536 - __main__ - INFO - - results/sepsis_prediction_results.html
2025-04-14 23:14:44,536 - __main__ - INFO - 
脓毒症早期预警系统已完成执行。系统具有以下特点：
1. 大规模数据集：从MIMIC-IV中提取了大量真实患者数据
2. 高质量训练：使用了100轮次的训练，带有学习率调度和早停机制
3. 先进的模型架构：使用了多模态融合的神经网络结构
4. 详细的可视化：提供了风险轨迹、特征重要性等多种可视化图表
5. 完整的HTML报告：帮助医生解读模型结果

完整的结果可在 results 目录中查看，特别是:
- results/figures/: 各种可视化和性能图表2025-05-20 18:25:27,125 - __main__ - INFO - ================================================================================
2025-05-20 18:25:27,126 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-20 18:25:27,126 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-20 18:25:27,126 - __main__ - INFO - ================================================================================
2025-05-20 18:25:27,127 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=True, force_real_data=False)
2025-05-20 18:25:27,180 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-20 18:25:27,180 - __main__ - INFO - Checking environment settings...
2025-05-20 18:25:27,181 - __main__ - ERROR - Missing required Python modules: torch, psycopg2
2025-05-20 18:25:27,181 - __main__ - ERROR - Please install missing modules: pip install torch psycopg2
2025-05-20 18:25:27,181 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:40:36,741 - __main__ - INFO - ================================================================================
2025-05-21 00:40:36,742 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:40:36,742 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:40:36,743 - __main__ - INFO - ================================================================================
2025-05-21 00:40:36,744 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:40:36,802 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:40:36,803 - __main__ - INFO - Checking environment settings...
2025-05-21 00:40:36,803 - __main__ - ERROR - Missing required Python modules: torch, psycopg2
2025-05-21 00:40:36,804 - __main__ - ERROR - Please install missing modules: pip install torch psycopg2
2025-05-21 00:40:36,804 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:47:29,227 - __main__ - INFO - ================================================================================
2025-05-21 00:47:29,229 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:47:29,229 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:47:29,230 - __main__ - INFO - ================================================================================
2025-05-21 00:47:29,231 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:47:29,298 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:47:29,298 - __main__ - INFO - Checking environment settings...
2025-05-21 00:47:29,299 - __main__ - ERROR - Missing required Python modules: torch, psycopg2
2025-05-21 00:47:29,299 - __main__ - ERROR - Please install missing modules: pip install torch psycopg2
2025-05-21 00:47:29,299 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:47:59,282 - __main__ - INFO - ================================================================================
2025-05-21 00:47:59,283 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:47:59,283 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:47:59,283 - __main__ - INFO - ================================================================================
2025-05-21 00:47:59,284 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:47:59,362 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:47:59,363 - __main__ - INFO - Checking environment settings...
2025-05-21 00:47:59,364 - __main__ - ERROR - Missing required Python modules: torch, psycopg2
2025-05-21 00:47:59,364 - __main__ - ERROR - Please install missing modules: pip install torch psycopg2
2025-05-21 00:47:59,364 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:48:26,848 - __main__ - INFO - ================================================================================
2025-05-21 00:48:26,848 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:48:26,848 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:48:26,848 - __main__ - INFO - ================================================================================
2025-05-21 00:48:26,850 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:48:26,904 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:48:26,904 - __main__ - INFO - Checking environment settings...
2025-05-21 00:48:26,905 - __main__ - ERROR - Missing required Python modules: torch, psycopg2
2025-05-21 00:48:26,905 - __main__ - ERROR - Please install missing modules: pip install torch psycopg2
2025-05-21 00:48:26,905 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:49:25,241 - __main__ - INFO - ================================================================================
2025-05-21 00:49:25,241 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:49:25,242 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:49:25,242 - __main__ - INFO - ================================================================================
2025-05-21 00:49:25,244 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:49:25,307 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:49:25,307 - __main__ - INFO - Checking environment settings...
2025-05-21 00:49:25,308 - __main__ - ERROR - Missing required Python modules: torch, psycopg2
2025-05-21 00:49:25,308 - __main__ - ERROR - Please install missing modules: pip install torch psycopg2
2025-05-21 00:49:25,308 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:49:48,358 - __main__ - INFO - ================================================================================
2025-05-21 00:49:48,359 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:49:48,359 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:49:48,359 - __main__ - INFO - ================================================================================
2025-05-21 00:49:48,361 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:49:48,410 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:49:48,410 - __main__ - INFO - Checking environment settings...
2025-05-21 00:49:48,411 - __main__ - ERROR - Missing required Python modules: torch, psycopg2
2025-05-21 00:49:48,411 - __main__ - ERROR - Please install missing modules: pip install torch psycopg2
2025-05-21 00:49:48,411 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:52:29,100 - __main__ - INFO - ================================================================================
2025-05-21 00:52:29,101 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:52:29,101 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:52:29,101 - __main__ - INFO - ================================================================================
2025-05-21 00:52:29,102 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:52:29,164 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:52:29,164 - __main__ - INFO - Checking environment settings...
2025-05-21 00:52:29,165 - __main__ - ERROR - Missing required Python modules: torch, psycopg2
2025-05-21 00:52:29,165 - __main__ - ERROR - Please install missing modules: pip install torch psycopg2
2025-05-21 00:52:29,166 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:53:08,443 - __main__ - INFO - ================================================================================
2025-05-21 00:53:08,443 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:53:08,444 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:53:08,444 - __main__ - INFO - ================================================================================
2025-05-21 00:53:08,445 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:53:08,502 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:53:08,503 - __main__ - INFO - Checking environment settings...
2025-05-21 00:53:10,626 - __main__ - INFO - Python version: 3.12.2
2025-05-21 00:53:10,627 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 00:53:10,627 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 00:53:10,627 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 00:53:10,627 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 00:53:10,627 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-21 00:53:31,641 - __main__ - ERROR - Database connection failed: connection to server at "172.16.3.67", port 5432 failed: Connection timed out (0x0000274C/10060)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-21 00:53:31,641 - __main__ - WARNING - Database connection failed, but will continue execution
2025-05-21 00:53:31,641 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-21 00:53:31,645 - utils.database_config - INFO - Connecting to MIMIC-IV database: 172.16.3.67:5432/mimiciv
2025-05-21 00:53:52,658 - utils.database_config - ERROR - MIMIC-IV database connection failed: connection to server at "172.16.3.67", port 5432 failed: Connection timed out (0x0000274C/10060)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-21 00:53:52,658 - utils.database_config - ERROR - Real data is required but cannot connect to MIMIC-IV database. Terminating program.
2025-05-21 00:54:05,456 - __main__ - INFO - ================================================================================
2025-05-21 00:54:05,456 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:54:05,456 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:54:05,456 - __main__ - INFO - ================================================================================
2025-05-21 00:54:18,177 - __main__ - INFO - ================================================================================
2025-05-21 00:54:18,177 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:54:18,177 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:54:18,178 - __main__ - INFO - ================================================================================
2025-05-21 00:54:18,179 - __main__ - INFO - Force real data mode enabled
2025-05-21 00:54:18,179 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=True)
2025-05-21 00:54:18,232 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:54:18,232 - __main__ - INFO - Checking environment settings...
2025-05-21 00:54:19,545 - __main__ - INFO - Python version: 3.12.2
2025-05-21 00:54:19,545 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 00:54:19,545 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 00:54:19,546 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 00:54:19,546 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 00:54:19,546 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-21 00:54:40,559 - __main__ - ERROR - Database connection failed: connection to server at "172.16.3.67", port 5432 failed: Connection timed out (0x0000274C/10060)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-21 00:54:40,560 - __main__ - ERROR - Force real data mode enabled, but database connection failed, terminating execution
2025-05-21 00:54:40,560 - __main__ - ERROR - Environment check failed, terminating execution
2025-05-21 00:56:49,103 - __main__ - INFO - ================================================================================
2025-05-21 00:56:49,103 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:56:49,103 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:56:49,103 - __main__ - INFO - ================================================================================
2025-05-21 00:56:49,104 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:56:49,162 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:56:49,162 - __main__ - INFO - Checking environment settings...
2025-05-21 00:56:50,376 - __main__ - INFO - Python version: 3.12.2
2025-05-21 00:56:50,377 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 00:56:50,377 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 00:56:50,377 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 00:56:50,378 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 00:56:50,378 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-21 00:57:11,391 - __main__ - ERROR - Database connection failed: connection to server at "172.16.3.67", port 5432 failed: Connection timed out (0x0000274C/10060)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-21 00:57:11,391 - __main__ - WARNING - Database connection failed, but will continue execution
2025-05-21 00:57:11,391 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-21 00:57:11,393 - utils.database_config - INFO - Connecting to MIMIC-IV database: 172.16.3.67:5432/mimiciv
2025-05-21 00:57:32,396 - utils.database_config - ERROR - MIMIC-IV database connection failed: connection to server at "172.16.3.67", port 5432 failed: Connection timed out (0x0000274C/10060)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-21 00:57:32,396 - utils.database_config - ERROR - Real data is required but cannot connect to MIMIC-IV database. Terminating program.
2025-05-21 00:57:55,111 - __main__ - INFO - ================================================================================
2025-05-21 00:57:55,112 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 00:57:55,112 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 00:57:55,112 - __main__ - INFO - ================================================================================
2025-05-21 00:57:55,114 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 00:57:55,186 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 00:57:55,186 - __main__ - INFO - Checking environment settings...
2025-05-21 00:57:56,371 - __main__ - INFO - Python version: 3.12.2
2025-05-21 00:57:56,372 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 00:57:56,372 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 00:57:56,372 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 00:57:56,372 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 00:57:56,372 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-21 00:58:17,386 - __main__ - INFO - User interrupted execution
2025-05-21 01:00:10,541 - __main__ - INFO - ================================================================================
2025-05-21 01:00:10,541 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 01:00:10,542 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 01:00:10,542 - __main__ - INFO - ================================================================================
2025-05-21 01:00:10,543 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 01:00:10,614 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 01:00:10,614 - __main__ - INFO - Checking environment settings...
2025-05-21 01:00:11,823 - __main__ - INFO - Python version: 3.12.2
2025-05-21 01:00:11,823 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 01:00:11,823 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 01:00:11,824 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 01:00:11,827 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 01:00:11,827 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-21 01:00:32,840 - __main__ - INFO - User interrupted execution
2025-05-21 01:01:01,927 - __main__ - INFO - ================================================================================
2025-05-21 01:01:01,928 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 01:01:01,928 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 01:01:01,929 - __main__ - INFO - ================================================================================
2025-05-21 01:01:01,930 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 01:01:01,992 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 01:01:01,993 - __main__ - INFO - Checking environment settings...
2025-05-21 01:01:03,186 - __main__ - INFO - Python version: 3.12.2
2025-05-21 01:01:03,186 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 01:01:03,186 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 01:01:03,187 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 01:01:03,187 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 01:01:03,187 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-21 01:01:24,202 - __main__ - INFO - User interrupted execution
2025-05-21 01:01:39,683 - __main__ - INFO - ================================================================================
2025-05-21 01:01:39,683 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 01:01:39,683 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 01:01:39,684 - __main__ - INFO - ================================================================================
2025-05-21 01:01:39,685 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 01:01:39,738 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 01:01:39,739 - __main__ - INFO - Checking environment settings...
2025-05-21 01:01:40,939 - __main__ - INFO - Python version: 3.12.2
2025-05-21 01:01:40,940 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 01:01:40,940 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 01:01:40,940 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 01:01:40,940 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 01:01:40,941 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-21 01:02:01,955 - __main__ - INFO - User interrupted execution
2025-05-21 01:02:09,523 - __main__ - INFO - ================================================================================
2025-05-21 01:02:09,523 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 01:02:09,523 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 01:02:09,524 - __main__ - INFO - ================================================================================
2025-05-21 01:02:09,525 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 01:02:09,582 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 01:02:09,582 - __main__ - INFO - Checking environment settings...
2025-05-21 01:02:10,839 - __main__ - INFO - Python version: 3.12.2
2025-05-21 01:02:10,839 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 01:02:10,840 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 01:02:10,840 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 01:02:10,840 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 01:02:10,840 - __main__ - INFO - Attempting to connect to database: localhost:5432/mimiciv
2025-05-21 01:02:11,037 - __main__ - ERROR - Database connection failed: 'utf-8' codec can't decode byte 0xd6 in position 61: invalid continuation byte
2025-05-21 01:02:11,038 - __main__ - WARNING - Database connection failed, but will continue execution
2025-05-21 01:02:11,038 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-21 01:02:11,041 - utils.database_config - INFO - Connecting to MIMIC-IV database: localhost:5432/mimiciv
2025-05-21 01:02:11,215 - utils.database_config - INFO - MIMIC-IV database connection successful!
2025-05-21 01:02:13,081 - __main__ - INFO - Derived tables exist and contain data: mimiciv_derived.sepsis3 (7,721,514 rows)
2025-05-21 01:02:13,084 - __main__ - INFO - Starting to extract clinical data from MIMIC-IV...
2025-05-21 01:02:13,084 - __main__ - INFO - Executing task: Extract clinical data
2025-05-21 01:02:13,323 - __main__ - ERROR - Command execution failed: python -m scripts.data_extraction_main 
2025-05-21 01:02:13,323 - __main__ - ERROR - Error: Traceback (most recent call last):
  File "<frozen runpy>", line 189, in _run_module_as_main
  File "<frozen runpy>", line 159, in _get_module_details
  File "<frozen importlib._bootstrap_external>", line 1129, in get_code
  File "<frozen importlib._bootstrap_external>", line 1059, in source_to_code
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "E:\�˹����ܵ���\final\project_ai\scripts\data_extraction_main.py", line 333
    print("���洦���������...")
    ^^^^^
SyntaxError: expected 'except' or 'finally' block
2025-05-21 01:02:13,323 - __main__ - ERROR - Data extraction failed
2025-05-21 01:02:13,323 - __main__ - ERROR - Data extraction failed, this may affect subsequent steps
2025-05-21 01:02:13,323 - __main__ - INFO - Starting to train sepsis prediction model...
2025-05-21 01:02:13,323 - __main__ - INFO - Executing task: Train multimodal prediction model
2025-05-21 01:02:13,486 - __main__ - INFO - Command completed successfully: python -m scripts.model_training --epochs 100 --batch_size 64 --learning_rate 0.0001 --early_stopping 10 --save_model True --use_multimodal True --use_weighted_loss True (Time: 0.16 seconds)
2025-05-21 01:02:13,486 - __main__ - ERROR - Model file does not exist: models/best_model.pt
2025-05-21 01:02:13,486 - __main__ - ERROR - Model training failed, this may affect subsequent steps
2025-05-21 01:02:13,486 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-21 01:02:13,486 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-21 01:02:18,629 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 5.14 seconds)
2025-05-21 01:02:18,630 - __main__ - INFO - Output: 2025-05-21 01:02:16,769 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-21 01:02:16,770 - __main__ - INFO - Generating ROC curve...
2025-05-21 01:02:17,376 - __main__ - INFO - Generating risk trajectory chart...
2025-05-21 01:02:17,688 - __main__ - INFO - Generating confusion matrix...
2025-05-21 01:02:17,906 - __main__ - INFO - Generating feature importance chart...
2025-05-21 01:02:18,229 - __main__ - INFO - Generating HTML report...
2025-05-21 01:02:18,230 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-21 01:02:18,230 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-21 01:02:18,630 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-21 01:02:18,631 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.60 KB)
2025-05-21 01:02:18,631 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.96 KB)
2025-05-21 01:02:18,631 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.58 KB)
2025-05-21 01:02:18,631 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (138.04 KB)
2025-05-21 01:02:18,632 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-21 01:02:18,632 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-21 01:02:18,632 - __main__ - INFO - Executing task: Analyze model results
2025-05-21 01:02:19,432 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 0.80 seconds)
2025-05-21 01:02:19,432 - __main__ - INFO - Output: ��ʼ���а�������...
���а�������ʱ����: No module named 'torch'
2025-05-21 01:02:19,432 - __main__ - INFO - Process execution status:
2025-05-21 01:02:19,432 - __main__ - INFO - - Database derived tables: Success
2025-05-21 01:02:19,433 - __main__ - INFO - - Data extraction: Failure
2025-05-21 01:02:19,433 - __main__ - INFO - - Model training: Failure
2025-05-21 01:02:19,433 - __main__ - INFO - - Result visualization: Success
2025-05-21 01:02:19,433 - __main__ - INFO - - Result analysis: Success
2025-05-21 01:02:19,433 - __main__ - INFO - Starting to validate system completeness...
2025-05-21 01:02:19,434 - __main__ - WARNING - System validation incomplete: Some components missing
2025-05-21 01:02:19,434 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.17 minutes
2025-05-21 01:02:19,434 - __main__ - INFO - Generated critical files:
2025-05-21 01:02:19,434 - __main__ - INFO - - data/processed/patient_features.csv: 4272.63 KB
2025-05-21 01:02:19,434 - __main__ - INFO - - data/processed/sepsis_labels.csv: 111.67 KB
2025-05-21 01:02:19,435 - __main__ - WARNING - - models/best_model.pt: File does not exist
2025-05-21 01:02:19,435 - __main__ - WARNING - - results/predictions.csv: File does not exist
2025-05-21 01:02:19,435 - __main__ - INFO - - results/figures/roc_curve.png: 129.60 KB
2025-05-21 01:02:19,435 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-21 01:02:19,435 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-21 01:04:25,540 - __main__ - INFO - ================================================================================
2025-05-21 01:04:25,541 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-21 01:04:25,541 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-21 01:04:25,541 - __main__ - INFO - ================================================================================
2025-05-21 01:04:25,542 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=False, skip_training=False, only_viz=False, force_real_data=False)
2025-05-21 01:04:25,604 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-21 01:04:25,604 - __main__ - INFO - Checking environment settings...
2025-05-21 01:04:26,851 - __main__ - INFO - Python version: 3.12.2
2025-05-21 01:04:26,852 - __main__ - INFO - PyTorch version: 2.7.0+cpu
2025-05-21 01:04:26,852 - __main__ - WARNING - GPU not available, using CPU may result in slow training
2025-05-21 01:04:26,852 - __main__ - INFO - psycopg2 detected as installed
2025-05-21 01:04:26,852 - __main__ - INFO - Attempting to check database connection directly...
2025-05-21 01:04:26,853 - __main__ - INFO - Attempting to connect to database: localhost:5432/mimiciv
2025-05-21 01:04:27,022 - __main__ - ERROR - Database connection failed: 'utf-8' codec can't decode byte 0xd6 in position 61: invalid continuation byte
2025-05-21 01:04:27,023 - __main__ - WARNING - Database connection failed, but will continue execution
2025-05-21 01:04:27,023 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-21 01:04:27,024 - utils.database_config - INFO - Connecting to MIMIC-IV database: localhost:5432/mimiciv
2025-05-21 01:04:27,188 - utils.database_config - INFO - MIMIC-IV database connection successful!
2025-05-21 01:04:27,750 - __main__ - INFO - Derived tables exist and contain data: mimiciv_derived.sepsis3 (7,721,514 rows)
2025-05-21 01:04:27,750 - __main__ - INFO - Starting to extract clinical data from MIMIC-IV...
2025-05-21 01:04:27,750 - __main__ - INFO - Executing task: Extract clinical data
2025-05-21 01:04:27,916 - __main__ - ERROR - Command execution failed: python -m scripts.data_extraction_main 
2025-05-21 01:04:27,917 - __main__ - ERROR - Error: Traceback (most recent call last):
  File "<frozen runpy>", line 189, in _run_module_as_main
  File "<frozen runpy>", line 159, in _get_module_details
  File "<frozen importlib._bootstrap_external>", line 1129, in get_code
  File "<frozen importlib._bootstrap_external>", line 1059, in source_to_code
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "E:\�˹����ܵ���\final\project_ai\scripts\data_extraction_main.py", line 333
    print("���洦���������...")
    ^^^^^
SyntaxError: expected 'except' or 'finally' block
2025-05-21 01:04:27,917 - __main__ - ERROR - Data extraction failed
2025-05-21 01:04:27,917 - __main__ - ERROR - Data extraction failed, this may affect subsequent steps
2025-05-21 01:04:27,917 - __main__ - INFO - Starting to train sepsis prediction model...
2025-05-21 01:04:27,918 - __main__ - INFO - Executing task: Train multimodal prediction model
2025-05-21 01:04:28,063 - __main__ - INFO - Command completed successfully: python -m scripts.model_training --epochs 100 --batch_size 64 --learning_rate 0.0001 --early_stopping 10 --save_model True --use_multimodal True --use_weighted_loss True (Time: 0.15 seconds)
2025-05-21 01:04:28,064 - __main__ - ERROR - Model file does not exist: models/best_model.pt
2025-05-21 01:04:28,064 - __main__ - ERROR - Model training failed, this may affect subsequent steps
2025-05-21 01:04:28,064 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-21 01:04:28,064 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-21 01:04:31,393 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 3.33 seconds)
2025-05-21 01:04:31,394 - __main__ - INFO - Output: 2025-05-21 01:04:29,925 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-21 01:04:29,925 - __main__ - INFO - Generating ROC curve...
2025-05-21 01:04:30,230 - __main__ - INFO - Generating risk trajectory chart...
2025-05-21 01:04:30,538 - __main__ - INFO - Generating confusion matrix...
2025-05-21 01:04:30,749 - __main__ - INFO - Generating feature importance chart...
2025-05-21 01:04:31,044 - __main__ - INFO - Generating HTML report...
2025-05-21 01:04:31,044 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-21 01:04:31,044 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-21 01:04:31,394 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-21 01:04:31,394 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.60 KB)
2025-05-21 01:04:31,395 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.96 KB)
2025-05-21 01:04:31,395 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.58 KB)
2025-05-21 01:04:31,395 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (138.04 KB)
2025-05-21 01:04:31,395 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-21 01:04:31,395 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-21 01:04:31,396 - __main__ - INFO - Executing task: Analyze model results
2025-05-21 01:04:31,988 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 0.59 seconds)
2025-05-21 01:04:31,988 - __main__ - INFO - Output: ��ʼ���а�������...
���а�������ʱ����: No module named 'torch'
2025-05-21 01:04:31,989 - __main__ - INFO - Process execution status:
2025-05-21 01:04:31,989 - __main__ - INFO - - Database derived tables: Success
2025-05-21 01:04:31,989 - __main__ - INFO - - Data extraction: Failure
2025-05-21 01:04:31,990 - __main__ - INFO - - Model training: Failure
2025-05-21 01:04:31,990 - __main__ - INFO - - Result visualization: Success
2025-05-21 01:04:31,991 - __main__ - INFO - - Result analysis: Success
2025-05-21 01:04:31,991 - __main__ - INFO - Starting to validate system completeness...
2025-05-21 01:04:31,991 - __main__ - WARNING - System validation incomplete: Some components missing
2025-05-21 01:04:31,991 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.11 minutes
2025-05-21 01:04:31,991 - __main__ - INFO - Generated critical files:
2025-05-21 01:04:31,991 - __main__ - INFO - - data/processed/patient_features.csv: 4272.63 KB
2025-05-21 01:04:31,991 - __main__ - INFO - - data/processed/sepsis_labels.csv: 111.67 KB
2025-05-21 01:04:31,992 - __main__ - WARNING - - models/best_model.pt: File does not exist
2025-05-21 01:04:31,992 - __main__ - WARNING - - results/predictions.csv: File does not exist
2025-05-21 01:04:31,992 - __main__ - INFO - - results/figures/roc_curve.png: 129.60 KB
2025-05-21 01:04:31,992 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-21 01:04:31,992 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-22 00:17:58,987 - __main__ - INFO - ================================================================================
2025-05-22 00:17:58,987 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 00:17:58,987 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 00:17:58,987 - __main__ - INFO - ================================================================================
2025-05-22 00:17:58,994 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=False, only_viz=False, force_real_data=False)
2025-05-22 00:17:59,147 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 00:17:59,147 - __main__ - INFO - Checking environment settings...
2025-05-22 00:18:04,761 - __main__ - INFO - Python version: 3.12.8
2025-05-22 00:18:04,762 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 00:18:06,256 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 00:18:06,261 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 00:18:06,261 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 00:18:06,261 - __main__ - INFO - Attempting to connect to database: localhost:5432/mimiciv
2025-05-22 00:18:10,344 - __main__ - ERROR - Database connection failed: connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-22 00:18:10,344 - __main__ - WARNING - Database connection failed, but will continue execution
2025-05-22 00:18:10,344 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 00:18:10,359 - utils.database_config - INFO - Connecting to MIMIC-IV database: localhost:5432/mimiciv
2025-05-22 00:18:14,420 - utils.database_config - ERROR - MIMIC-IV database connection failed: connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-22 00:18:14,422 - utils.database_config - ERROR - Real data is required but cannot connect to MIMIC-IV database. Terminating program.
2025-05-22 00:42:07,983 - __main__ - INFO - ================================================================================
2025-05-22 00:42:07,983 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 00:42:07,987 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 00:42:07,987 - __main__ - INFO - ================================================================================
2025-05-22 00:42:07,993 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=False, only_viz=False, force_real_data=False)
2025-05-22 00:42:08,157 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 00:42:08,157 - __main__ - INFO - Checking environment settings...
2025-05-22 00:42:14,933 - __main__ - INFO - Python version: 3.12.8
2025-05-22 00:42:14,937 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 00:42:16,416 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 00:42:16,416 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 00:42:16,419 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 00:42:16,421 - __main__ - INFO - Attempting to connect to database: localhost:5432/mimiciv
2025-05-22 00:42:20,507 - __main__ - ERROR - Database connection failed: connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-22 00:42:20,507 - __main__ - WARNING - Database connection failed, but will continue execution
2025-05-22 00:42:20,507 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 00:42:20,514 - utils.database_config - INFO - Connecting to MIMIC-IV database: localhost:5432/mimiciv
2025-05-22 00:42:24,574 - utils.database_config - ERROR - MIMIC-IV database connection failed: connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-22 00:42:24,576 - utils.database_config - ERROR - Real data is required but cannot connect to MIMIC-IV database. Terminating program.
2025-05-22 00:43:35,755 - __main__ - INFO - ================================================================================
2025-05-22 00:43:35,756 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 00:43:35,757 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 00:43:35,757 - __main__ - INFO - ================================================================================
2025-05-22 00:43:35,762 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=False, only_viz=False, force_real_data=False)
2025-05-22 00:43:35,948 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 00:43:35,949 - __main__ - INFO - Checking environment settings...
2025-05-22 00:43:42,189 - __main__ - INFO - Python version: 3.12.8
2025-05-22 00:43:42,189 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 00:43:43,624 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 00:43:43,624 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 00:43:43,628 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 00:43:43,628 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-22 00:43:43,994 - __main__ - INFO - Database connection test successful
2025-05-22 00:43:44,138 - __main__ - INFO - Number of patients in MIMIC-IV database: 364,627
2025-05-22 00:43:44,142 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 00:43:44,147 - utils.database_config - INFO - Connecting to MIMIC-IV database: localhost:5432/mimiciv
2025-05-22 00:43:48,247 - utils.database_config - ERROR - MIMIC-IV database connection failed: connection to server at "localhost" (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

2025-05-22 00:43:48,247 - utils.database_config - ERROR - Real data is required but cannot connect to MIMIC-IV database. Terminating program.
2025-05-22 00:46:00,085 - __main__ - INFO - ================================================================================
2025-05-22 00:46:00,085 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 00:46:00,085 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 00:46:00,085 - __main__ - INFO - ================================================================================
2025-05-22 00:46:00,093 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=False, only_viz=False, force_real_data=False)
2025-05-22 00:46:00,301 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 00:46:00,301 - __main__ - INFO - Checking environment settings...
2025-05-22 00:46:06,076 - __main__ - INFO - Python version: 3.12.8
2025-05-22 00:46:06,076 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 00:46:07,492 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 00:46:07,496 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 00:46:07,496 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 00:46:07,499 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-22 00:46:07,729 - __main__ - INFO - Database connection test successful
2025-05-22 00:46:07,818 - __main__ - INFO - Number of patients in MIMIC-IV database: 364,627
2025-05-22 00:46:07,819 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 00:46:07,833 - utils.database_config - INFO - Connecting to MIMIC-IV database: 172.16.3.67:5432/mimiciv
2025-05-22 00:46:08,061 - utils.database_config - INFO - MIMIC-IV database connection successful!
2025-05-22 00:46:09,822 - __main__ - INFO - Derived tables exist and contain data: mimiciv_derived.sepsis3 (7,721,514 rows)
2025-05-22 00:46:09,822 - __main__ - INFO - Starting to train sepsis prediction model...
2025-05-22 00:46:09,826 - __main__ - INFO - Executing task: Train multimodal prediction model
2025-05-22 00:46:10,043 - __main__ - INFO - Command completed successfully: python -m scripts.model_training --epochs 100 --batch_size 64 --learning_rate 0.0001 --early_stopping 10 --save_model True --use_multimodal True --use_weighted_loss True (Time: 0.22 seconds)
2025-05-22 00:46:10,045 - __main__ - ERROR - Model file does not exist: models/best_model.pt
2025-05-22 00:46:10,046 - __main__ - ERROR - Model training failed, this may affect subsequent steps
2025-05-22 00:46:10,046 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-22 00:46:10,047 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-22 00:46:22,029 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 11.98 seconds)
2025-05-22 00:46:22,029 - __main__ - INFO - Output: 2025-05-22 00:46:14,973 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-22 00:46:14,977 - __main__ - INFO - Generating ROC curve...
2025-05-22 00:46:17,121 - __main__ - INFO - Generating risk trajectory chart...
2025-05-22 00:46:18,666 - __main__ - INFO - Generating confusion matrix...
2025-05-22 00:46:19,733 - __main__ - INFO - Generating feature importance chart...
2025-05-22 00:46:21,164 - __main__ - INFO - Generating HTML report...
2025-05-22 00:46:21,167 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-22 00:46:21,167 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-22 00:46:22,032 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-22 00:46:22,034 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.57 KB)
2025-05-22 00:46:22,034 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.64 KB)
2025-05-22 00:46:22,037 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.34 KB)
2025-05-22 00:46:22,037 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (137.50 KB)
2025-05-22 00:46:22,038 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-22 00:46:22,038 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-22 00:46:22,040 - __main__ - INFO - Executing task: Analyze model results
2025-05-22 00:46:36,833 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 14.79 seconds)
2025-05-22 00:46:36,833 - __main__ - INFO - Output: ��ʼ���а�������...
�������ݺ�ģ��...
�ӱ����ļ���������...
���а�������ʱ����: [Errno 2] No such file or directory: 'models/best_model.pt'
2025-05-22 00:46:36,836 - __main__ - INFO - Process execution status:
2025-05-22 00:46:36,837 - __main__ - INFO - - Database derived tables: Success
2025-05-22 00:46:36,838 - __main__ - INFO - - Model training: Failure
2025-05-22 00:46:36,838 - __main__ - INFO - - Result visualization: Success
2025-05-22 00:46:36,838 - __main__ - INFO - - Result analysis: Success
2025-05-22 00:46:36,838 - __main__ - INFO - Starting to validate system completeness...
2025-05-22 00:46:36,838 - __main__ - WARNING - System validation incomplete: Some components missing
2025-05-22 00:46:36,841 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.61 minutes
2025-05-22 00:46:36,841 - __main__ - INFO - Generated critical files:
2025-05-22 00:46:36,843 - __main__ - INFO - - data/processed/patient_features.csv: 61662.76 KB
2025-05-22 00:46:36,843 - __main__ - INFO - - data/processed/sepsis_labels.csv: 3966.01 KB
2025-05-22 00:46:36,844 - __main__ - WARNING - - models/best_model.pt: File does not exist
2025-05-22 00:46:36,844 - __main__ - WARNING - - results/predictions.csv: File does not exist
2025-05-22 00:46:36,846 - __main__ - INFO - - results/figures/roc_curve.png: 129.57 KB
2025-05-22 00:46:36,847 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-22 00:46:36,847 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-22 00:49:16,538 - __main__ - INFO - ================================================================================
2025-05-22 00:49:16,540 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 00:49:16,541 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 00:49:16,541 - __main__ - INFO - ================================================================================
2025-05-22 00:49:16,544 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=True, skip_extraction=True, skip_training=False, only_viz=False, force_real_data=False)
2025-05-22 00:49:16,737 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 00:49:16,737 - __main__ - INFO - Checking environment settings...
2025-05-22 00:49:22,294 - __main__ - INFO - Python version: 3.12.8
2025-05-22 00:49:22,294 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 00:49:23,734 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 00:49:23,735 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 00:49:23,735 - __main__ - INFO - Skipping database operations, not checking database connection
2025-05-22 00:49:23,735 - __main__ - INFO - Starting to train sepsis prediction model...
2025-05-22 00:49:23,735 - __main__ - INFO - Executing task: Train multimodal prediction model
2025-05-22 00:49:23,914 - __main__ - INFO - Command completed successfully: python -m scripts.model_training --epochs 100 --batch_size 64 --learning_rate 0.0001 --early_stopping 10 --save_model True --use_multimodal True --use_weighted_loss True (Time: 0.17 seconds)
2025-05-22 00:49:23,918 - __main__ - ERROR - Model file does not exist: models/best_model.pt
2025-05-22 00:49:23,918 - __main__ - ERROR - Model training failed, this may affect subsequent steps
2025-05-22 00:49:23,918 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-22 00:49:23,918 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-22 00:49:34,769 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 10.85 seconds)
2025-05-22 00:49:34,769 - __main__ - INFO - Output: 2025-05-22 00:49:28,613 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-22 00:49:28,617 - __main__ - INFO - Generating ROC curve...
2025-05-22 00:49:30,349 - __main__ - INFO - Generating risk trajectory chart...
2025-05-22 00:49:31,687 - __main__ - INFO - Generating confusion matrix...
2025-05-22 00:49:32,728 - __main__ - INFO - Generating feature importance chart...
2025-05-22 00:49:34,028 - __main__ - INFO - Generating HTML report...
2025-05-22 00:49:34,032 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-22 00:49:34,032 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-22 00:49:34,773 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-22 00:49:34,773 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.57 KB)
2025-05-22 00:49:34,773 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.64 KB)
2025-05-22 00:49:34,777 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.34 KB)
2025-05-22 00:49:34,777 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (137.50 KB)
2025-05-22 00:49:34,777 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-22 00:49:34,777 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-22 00:49:34,777 - __main__ - INFO - Executing task: Analyze model results
2025-05-22 00:49:49,557 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 14.78 seconds)
2025-05-22 00:49:49,557 - __main__ - INFO - Output: ��ʼ���а�������...
�������ݺ�ģ��...
�ӱ����ļ���������...
���а�������ʱ����: [Errno 2] No such file or directory: 'models/best_model.pt'
2025-05-22 00:49:49,559 - __main__ - INFO - Process execution status:
2025-05-22 00:49:49,559 - __main__ - INFO - - Model training: Failure
2025-05-22 00:49:49,559 - __main__ - INFO - - Result visualization: Success
2025-05-22 00:49:49,561 - __main__ - INFO - - Result analysis: Success
2025-05-22 00:49:49,561 - __main__ - INFO - Starting to validate system completeness...
2025-05-22 00:49:49,563 - __main__ - WARNING - System validation incomplete: Some components missing
2025-05-22 00:49:49,564 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.55 minutes
2025-05-22 00:49:49,564 - __main__ - INFO - Generated critical files:
2025-05-22 00:49:49,564 - __main__ - INFO - - data/processed/patient_features.csv: 61664.32 KB
2025-05-22 00:49:49,566 - __main__ - INFO - - data/processed/sepsis_labels.csv: 3966.00 KB
2025-05-22 00:49:49,566 - __main__ - WARNING - - models/best_model.pt: File does not exist
2025-05-22 00:49:49,566 - __main__ - WARNING - - results/predictions.csv: File does not exist
2025-05-22 00:49:49,566 - __main__ - INFO - - results/figures/roc_curve.png: 129.57 KB
2025-05-22 00:49:49,570 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-22 00:49:49,571 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-22 00:52:11,126 - __main__ - INFO - ================================================================================
2025-05-22 00:52:11,126 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 00:52:11,126 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 00:52:11,129 - __main__ - INFO - ================================================================================
2025-05-22 00:52:11,131 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=True, skip_extraction=True, skip_training=False, only_viz=False, force_real_data=False)
2025-05-22 00:52:11,303 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 00:52:11,303 - __main__ - INFO - Checking environment settings...
2025-05-22 00:52:16,735 - __main__ - INFO - Python version: 3.12.8
2025-05-22 00:52:16,735 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 00:52:18,369 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 00:52:18,370 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 00:52:18,371 - __main__ - INFO - Skipping database operations, not checking database connection
2025-05-22 00:52:18,372 - __main__ - INFO - Starting to train sepsis prediction model...
2025-05-22 00:52:18,373 - __main__ - INFO - Executing task: Train multimodal prediction model
2025-05-22 00:52:30,691 - __main__ - ERROR - Command execution failed: python -m scripts.model_training --epochs 100 --batch_size 64 --learning_rate 0.0001 --early_stopping 10 --save_model True --use_multimodal True --use_weighted_loss True
2025-05-22 00:52:30,692 - __main__ - ERROR - Error: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "D:\Documents\Downloads\ai\project\scripts\model_training.py", line 206, in <module>
    train_and_evaluate_model()
  File "D:\Documents\Downloads\ai\project\scripts\model_training.py", line 19, in train_and_evaluate_model
    dataset = SepsisDataset(
              ^^^^^^^^^^^^^^
TypeError: SepsisDataset.__init__() got an unexpected keyword argument 'patient_features'
���ش����õ�����...
�ӱ����ļ���������...
�������ݼ�...
2025-05-22 00:52:30,695 - __main__ - ERROR - Model training failed, this may affect subsequent steps
2025-05-22 00:52:30,696 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-22 00:52:30,696 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-22 00:52:40,425 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 9.73 seconds)
2025-05-22 00:52:40,426 - __main__ - INFO - Output: 2025-05-22 00:52:35,473 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-22 00:52:35,473 - __main__ - INFO - Generating ROC curve...
2025-05-22 00:52:36,706 - __main__ - INFO - Generating risk trajectory chart...
2025-05-22 00:52:37,937 - __main__ - INFO - Generating confusion matrix...
2025-05-22 00:52:38,886 - __main__ - INFO - Generating feature importance chart...
2025-05-22 00:52:40,033 - __main__ - INFO - Generating HTML report...
2025-05-22 00:52:40,035 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-22 00:52:40,035 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-22 00:52:40,429 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-22 00:52:40,430 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.57 KB)
2025-05-22 00:52:40,431 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.64 KB)
2025-05-22 00:52:40,431 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.34 KB)
2025-05-22 00:52:40,433 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (137.50 KB)
2025-05-22 00:52:40,433 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-22 00:52:40,434 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-22 00:52:40,434 - __main__ - INFO - Executing task: Analyze model results
2025-05-22 00:52:55,620 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 15.19 seconds)
2025-05-22 00:52:55,620 - __main__ - INFO - Output: ��ʼ���а�������...
�������ݺ�ģ��...
�ӱ����ļ���������...
���а�������ʱ����: [Errno 2] No such file or directory: 'models/best_model.pt'
2025-05-22 00:52:55,623 - __main__ - INFO - Process execution status:
2025-05-22 00:52:55,624 - __main__ - INFO - - Model training: Failure
2025-05-22 00:52:55,624 - __main__ - INFO - - Result visualization: Success
2025-05-22 00:52:55,624 - __main__ - INFO - - Result analysis: Success
2025-05-22 00:52:55,626 - __main__ - INFO - Starting to validate system completeness...
2025-05-22 00:52:55,627 - __main__ - WARNING - System validation incomplete: Some components missing
2025-05-22 00:52:55,629 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.74 minutes
2025-05-22 00:52:55,629 - __main__ - INFO - Generated critical files:
2025-05-22 00:52:55,629 - __main__ - INFO - - data/processed/patient_features.csv: 61664.32 KB
2025-05-22 00:52:55,631 - __main__ - INFO - - data/processed/sepsis_labels.csv: 3966.00 KB
2025-05-22 00:52:55,631 - __main__ - WARNING - - models/best_model.pt: File does not exist
2025-05-22 00:52:55,633 - __main__ - WARNING - - results/predictions.csv: File does not exist
2025-05-22 00:52:55,633 - __main__ - INFO - - results/figures/roc_curve.png: 129.57 KB
2025-05-22 00:52:55,634 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-22 00:52:55,634 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-22 00:54:51,543 - __main__ - INFO - ================================================================================
2025-05-22 00:54:51,547 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 00:54:51,547 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 00:54:51,547 - __main__ - INFO - ================================================================================
2025-05-22 00:54:51,551 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=True, skip_extraction=True, skip_training=False, only_viz=False, force_real_data=False)
2025-05-22 00:54:51,719 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 00:54:51,719 - __main__ - INFO - Checking environment settings...
2025-05-22 00:54:57,276 - __main__ - INFO - Python version: 3.12.8
2025-05-22 00:54:57,277 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 00:54:58,698 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 00:54:58,698 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 00:54:58,700 - __main__ - INFO - Skipping database operations, not checking database connection
2025-05-22 00:54:58,701 - __main__ - INFO - Starting to train sepsis prediction model...
2025-05-22 00:54:58,701 - __main__ - INFO - Executing task: Train multimodal prediction model
2025-05-22 00:55:10,508 - __main__ - ERROR - Command execution failed: python -m scripts.model_training --epochs 100 --batch_size 64 --learning_rate 0.0001 --early_stopping 10 --save_model True --use_multimodal True --use_weighted_loss True
2025-05-22 00:55:10,511 - __main__ - ERROR - Error: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "D:\Documents\Downloads\ai\project\scripts\model_training.py", line 232, in <module>
    train_and_evaluate_model()
  File "D:\Documents\Downloads\ai\project\scripts\model_training.py", line 23, in train_and_evaluate_model
    vitals, labs, drugs, text_embeds = preprocess_features(patient_features, FEATURE_CONFIG)
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Documents\Downloads\ai\project\utils\data_loading.py", line 221, in preprocess_features
    labs = patient_data[labs_cols].fillna(0).values
           ~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\Think\AppData\Roaming\Python\Python312\site-packages\pandas\core\frame.py", line 4108, in __getitem__
    indexer = self.columns._get_indexer_strict(key, "columns")[1]
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Think\AppData\Roaming\Python\Python312\site-packages\pandas\core\indexes\base.py", line 6200, in _get_indexer_strict
    self._raise_if_missing(keyarr, indexer, axis_name)
  File "C:\Users\Think\AppData\Roaming\Python\Python312\site-packages\pandas\core\indexes\base.py", line 6252, in _raise_if_missing
    raise KeyError(f"{not_found} not in index")
KeyError: "['bilirubin'] not in index"
���ش����õ�����...
�ӱ����ļ���������...
�������ݼ�...
2025-05-22 00:55:10,516 - __main__ - ERROR - Model training failed, this may affect subsequent steps
2025-05-22 00:55:10,516 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-22 00:55:10,516 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-22 00:55:21,504 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 10.99 seconds)
2025-05-22 00:55:21,508 - __main__ - INFO - Output: 2025-05-22 00:55:15,167 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-22 00:55:15,171 - __main__ - INFO - Generating ROC curve...
2025-05-22 00:55:17,198 - __main__ - INFO - Generating risk trajectory chart...
2025-05-22 00:55:18,504 - __main__ - INFO - Generating confusion matrix...
2025-05-22 00:55:19,444 - __main__ - INFO - Generating feature importance chart...
2025-05-22 00:55:20,774 - __main__ - INFO - Generating HTML report...
2025-05-22 00:55:20,778 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-22 00:55:20,778 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-22 00:55:21,508 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-22 00:55:21,512 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.57 KB)
2025-05-22 00:55:21,512 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.64 KB)
2025-05-22 00:55:21,512 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.34 KB)
2025-05-22 00:55:21,512 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (137.50 KB)
2025-05-22 00:55:21,512 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-22 00:55:21,516 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-22 00:55:21,516 - __main__ - INFO - Executing task: Analyze model results
2025-05-22 00:55:36,029 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 14.51 seconds)
2025-05-22 00:55:36,032 - __main__ - INFO - Output: ��ʼ���а�������...
�������ݺ�ģ��...
�ӱ����ļ���������...
���а�������ʱ����: [Errno 2] No such file or directory: 'models/best_model.pt'
2025-05-22 00:55:36,033 - __main__ - INFO - Process execution status:
2025-05-22 00:55:36,033 - __main__ - INFO - - Model training: Failure
2025-05-22 00:55:36,034 - __main__ - INFO - - Result visualization: Success
2025-05-22 00:55:36,034 - __main__ - INFO - - Result analysis: Success
2025-05-22 00:55:36,036 - __main__ - INFO - Starting to validate system completeness...
2025-05-22 00:55:36,037 - __main__ - WARNING - System validation incomplete: Some components missing
2025-05-22 00:55:36,037 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.74 minutes
2025-05-22 00:55:36,038 - __main__ - INFO - Generated critical files:
2025-05-22 00:55:36,038 - __main__ - INFO - - data/processed/patient_features.csv: 61664.32 KB
2025-05-22 00:55:36,038 - __main__ - INFO - - data/processed/sepsis_labels.csv: 3966.00 KB
2025-05-22 00:55:36,038 - __main__ - WARNING - - models/best_model.pt: File does not exist
2025-05-22 00:55:36,041 - __main__ - WARNING - - results/predictions.csv: File does not exist
2025-05-22 00:55:36,041 - __main__ - INFO - - results/figures/roc_curve.png: 129.57 KB
2025-05-22 00:55:36,041 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-22 00:55:36,041 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-22 01:10:19,177 - __main__ - INFO - ================================================================================
2025-05-22 01:10:19,177 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 01:10:19,179 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 01:10:19,179 - __main__ - INFO - ================================================================================
2025-05-22 01:10:19,181 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=False, only_viz=False, force_real_data=False)
2025-05-22 01:10:19,360 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 01:10:19,360 - __main__ - INFO - Checking environment settings...
2025-05-22 01:10:25,183 - __main__ - INFO - Python version: 3.12.8
2025-05-22 01:10:25,183 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 01:10:26,825 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 01:10:26,825 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 01:10:26,826 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 01:10:26,826 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-22 01:10:27,058 - __main__ - INFO - Database connection test successful
2025-05-22 01:10:27,161 - __main__ - INFO - Number of patients in MIMIC-IV database: 364,627
2025-05-22 01:10:27,161 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 01:10:27,166 - utils.database_config - INFO - Connecting to MIMIC-IV database: 172.16.3.67:5432/mimiciv
2025-05-22 01:10:27,384 - utils.database_config - INFO - MIMIC-IV database connection successful!
2025-05-22 01:10:27,790 - __main__ - INFO - Derived tables exist and contain data: mimiciv_derived.sepsis3 (7,721,514 rows)
2025-05-22 01:10:27,790 - __main__ - INFO - Starting to train sepsis prediction model...
2025-05-22 01:10:27,794 - __main__ - INFO - Executing task: Train multimodal prediction model
2025-05-22 01:15:18,583 - __main__ - INFO - User interrupted execution
2025-05-22 01:15:27,951 - __main__ - INFO - ================================================================================
2025-05-22 01:15:27,951 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 01:15:27,951 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 01:15:27,951 - __main__ - INFO - ================================================================================
2025-05-22 01:15:27,959 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=True, only_viz=False, force_real_data=False)
2025-05-22 01:15:28,141 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 01:15:28,141 - __main__ - INFO - Checking environment settings...
2025-05-22 01:15:33,675 - __main__ - INFO - Python version: 3.12.8
2025-05-22 01:15:33,675 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 01:15:35,339 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 01:15:35,339 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 01:15:35,343 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 01:15:35,343 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-22 01:15:35,563 - __main__ - INFO - Database connection test successful
2025-05-22 01:15:35,649 - __main__ - INFO - Number of patients in MIMIC-IV database: 364,627
2025-05-22 01:15:35,649 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 01:15:35,652 - utils.database_config - INFO - Connecting to MIMIC-IV database: 172.16.3.67:5432/mimiciv
2025-05-22 01:15:35,859 - utils.database_config - INFO - MIMIC-IV database connection successful!
2025-05-22 01:15:36,242 - __main__ - INFO - Derived tables exist and contain data: mimiciv_derived.sepsis3 (7,721,514 rows)
2025-05-22 01:15:36,245 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-22 01:15:36,245 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-22 01:15:46,493 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 10.25 seconds)
2025-05-22 01:15:46,493 - __main__ - INFO - Output: 2025-05-22 01:15:40,863 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-22 01:15:40,863 - __main__ - INFO - Generating ROC curve...
2025-05-22 01:15:42,540 - __main__ - INFO - Generating risk trajectory chart...
2025-05-22 01:15:43,758 - __main__ - INFO - Generating confusion matrix...
2025-05-22 01:15:44,657 - __main__ - INFO - Generating feature importance chart...
2025-05-22 01:15:45,824 - __main__ - INFO - Generating HTML report...
2025-05-22 01:15:45,826 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-22 01:15:45,826 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-22 01:15:46,497 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-22 01:15:46,499 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.57 KB)
2025-05-22 01:15:46,499 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.64 KB)
2025-05-22 01:15:46,501 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.34 KB)
2025-05-22 01:15:46,502 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (137.50 KB)
2025-05-22 01:15:46,502 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-22 01:15:46,502 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-22 01:15:46,502 - __main__ - INFO - Executing task: Analyze model results
2025-05-22 01:16:02,060 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 15.55 seconds)
2025-05-22 01:16:02,060 - __main__ - INFO - Output: ��ʼ���а�������...
�������ݺ�ģ��...
�ӱ����ļ���������...
���а�������ʱ����: [Errno 2] No such file or directory: 'models/dataset_splits.pt'
2025-05-22 01:16:02,060 - __main__ - INFO - Process execution status:
2025-05-22 01:16:02,063 - __main__ - INFO - - Database derived tables: Success
2025-05-22 01:16:02,063 - __main__ - INFO - - Result visualization: Success
2025-05-22 01:16:02,064 - __main__ - INFO - - Result analysis: Success
2025-05-22 01:16:02,064 - __main__ - INFO - Starting to validate system completeness...
2025-05-22 01:16:02,064 - __main__ - WARNING - System validation incomplete: Some components missing
2025-05-22 01:16:02,064 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.57 minutes
2025-05-22 01:16:02,064 - __main__ - INFO - Generated critical files:
2025-05-22 01:16:02,068 - __main__ - INFO - - data/processed/patient_features.csv: 61664.32 KB
2025-05-22 01:16:02,068 - __main__ - INFO - - data/processed/sepsis_labels.csv: 3966.00 KB
2025-05-22 01:16:02,068 - __main__ - INFO - - models/best_model.pt: 102722.30 KB
2025-05-22 01:16:02,068 - __main__ - WARNING - - results/predictions.csv: File does not exist
2025-05-22 01:16:02,072 - __main__ - INFO - - results/figures/roc_curve.png: 129.57 KB
2025-05-22 01:16:02,074 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-22 01:16:02,074 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-22 01:19:17,300 - __main__ - INFO - ================================================================================
2025-05-22 01:19:17,304 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 01:19:17,304 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 01:19:17,306 - __main__ - INFO - ================================================================================
2025-05-22 01:19:17,309 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=True, only_viz=False, force_real_data=False)
2025-05-22 01:19:17,448 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 01:19:17,448 - __main__ - INFO - Checking environment settings...
2025-05-22 01:19:23,329 - __main__ - INFO - Python version: 3.12.8
2025-05-22 01:19:23,333 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 01:19:24,996 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 01:19:24,996 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 01:19:24,996 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 01:19:25,000 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-22 01:19:25,213 - __main__ - INFO - Database connection test successful
2025-05-22 01:19:25,305 - __main__ - INFO - Number of patients in MIMIC-IV database: 364,627
2025-05-22 01:19:25,305 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 01:19:25,309 - utils.database_config - INFO - Connecting to MIMIC-IV database: 172.16.3.67:5432/mimiciv
2025-05-22 01:19:25,535 - utils.database_config - INFO - MIMIC-IV database connection successful!
2025-05-22 01:19:25,968 - __main__ - INFO - Derived tables exist and contain data: mimiciv_derived.sepsis3 (7,721,514 rows)
2025-05-22 01:19:25,968 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-22 01:19:25,968 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-22 01:19:35,805 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 9.84 seconds)
2025-05-22 01:19:35,805 - __main__ - INFO - Output: 2025-05-22 01:19:30,968 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-22 01:19:30,968 - __main__ - INFO - Generating ROC curve...
2025-05-22 01:19:32,034 - __main__ - INFO - Generating risk trajectory chart...
2025-05-22 01:19:33,242 - __main__ - INFO - Generating confusion matrix...
2025-05-22 01:19:34,169 - __main__ - INFO - Generating feature importance chart...
2025-05-22 01:19:35,410 - __main__ - INFO - Generating HTML report...
2025-05-22 01:19:35,414 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-22 01:19:35,414 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-22 01:19:35,809 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-22 01:19:35,811 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.57 KB)
2025-05-22 01:19:35,812 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.64 KB)
2025-05-22 01:19:35,812 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.34 KB)
2025-05-22 01:19:35,815 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (137.50 KB)
2025-05-22 01:19:35,815 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-22 01:19:35,815 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-22 01:19:35,815 - __main__ - INFO - Executing task: Analyze model results
2025-05-22 01:19:51,717 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 15.90 seconds)
2025-05-22 01:19:51,717 - __main__ - INFO - Output: ��ʼ���а�������...
�������ݺ�ģ��...
�ӱ����ļ���������...
���а�������ʱ����: SepsisDataset.__init__() got an unexpected keyword argument 'patient_features'
2025-05-22 01:19:51,717 - __main__ - INFO - Process execution status:
2025-05-22 01:19:51,721 - __main__ - INFO - - Database derived tables: Success
2025-05-22 01:19:51,721 - __main__ - INFO - - Result visualization: Success
2025-05-22 01:19:51,721 - __main__ - INFO - - Result analysis: Success
2025-05-22 01:19:51,721 - __main__ - INFO - Starting to validate system completeness...
2025-05-22 01:19:51,721 - __main__ - INFO - System validation passed: All critical components complete
2025-05-22 01:19:51,725 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.57 minutes
2025-05-22 01:19:51,725 - __main__ - INFO - Generated critical files:
2025-05-22 01:19:51,725 - __main__ - INFO - - data/processed/patient_features.csv: 61664.32 KB
2025-05-22 01:19:51,725 - __main__ - INFO - - data/processed/sepsis_labels.csv: 3966.00 KB
2025-05-22 01:19:51,729 - __main__ - INFO - - models/best_model.pt: 102722.30 KB
2025-05-22 01:19:51,729 - __main__ - INFO - - results/predictions.csv: 141.13 KB
2025-05-22 01:19:51,729 - __main__ - INFO - - results/figures/roc_curve.png: 129.57 KB
2025-05-22 01:19:51,729 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-22 01:19:51,733 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-22 01:24:52,131 - __main__ - INFO - ================================================================================
2025-05-22 01:24:52,132 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 01:24:52,133 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 01:24:52,133 - __main__ - INFO - ================================================================================
2025-05-22 01:24:52,139 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=True, only_viz=False, force_real_data=False)
2025-05-22 01:24:52,300 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 01:24:52,300 - __main__ - INFO - Checking environment settings...
2025-05-22 01:24:58,175 - __main__ - INFO - Python version: 3.12.8
2025-05-22 01:24:58,175 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 01:24:59,821 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 01:24:59,821 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 01:24:59,825 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 01:24:59,825 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-22 01:25:00,948 - __main__ - INFO - Database connection test successful
2025-05-22 01:25:01,186 - __main__ - INFO - Number of patients in MIMIC-IV database: 364,627
2025-05-22 01:25:01,187 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 01:25:01,190 - utils.database_config - INFO - Connecting to MIMIC-IV database: 172.16.3.67:5432/mimiciv
2025-05-22 01:25:01,749 - utils.database_config - INFO - MIMIC-IV database connection successful!
2025-05-22 01:25:03,412 - __main__ - INFO - Derived tables exist and contain data: mimiciv_derived.sepsis3 (7,721,514 rows)
2025-05-22 01:25:03,413 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-22 01:25:03,413 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-22 01:25:13,284 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 9.87 seconds)
2025-05-22 01:25:13,284 - __main__ - INFO - Output: 2025-05-22 01:25:08,370 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-22 01:25:08,374 - __main__ - INFO - Generating ROC curve...
2025-05-22 01:25:09,561 - __main__ - INFO - Generating risk trajectory chart...
2025-05-22 01:25:10,736 - __main__ - INFO - Generating confusion matrix...
2025-05-22 01:25:11,643 - __main__ - INFO - Generating feature importance chart...
2025-05-22 01:25:12,854 - __main__ - INFO - Generating HTML report...
2025-05-22 01:25:12,856 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-22 01:25:12,856 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-22 01:25:13,287 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-22 01:25:13,288 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.57 KB)
2025-05-22 01:25:13,289 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.64 KB)
2025-05-22 01:25:13,290 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.34 KB)
2025-05-22 01:25:13,291 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (137.50 KB)
2025-05-22 01:25:13,293 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-22 01:25:13,293 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-22 01:25:13,295 - __main__ - INFO - Executing task: Analyze model results
2025-05-22 01:25:28,867 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 15.57 seconds)
2025-05-22 01:25:28,869 - __main__ - INFO - Output: ��ʼ���а�������...
�������ݺ�ģ��...
�ӱ����ļ���������...
���Դ�·������ģ��: models/best_model.pt
���Դ�·���������ݼ��ָ�: models/dataset_splits.pt
�ɹ����ز��Լ����������� 150 ������
���а�������ʱ����: SepsisDataset.__init__() got an unexpected keyword argument 'patient_features'
2025-05-22 01:25:28,875 - __main__ - INFO - Process execution status:
2025-05-22 01:25:28,878 - __main__ - INFO - - Database derived tables: Success
2025-05-22 01:25:28,878 - __main__ - INFO - - Result visualization: Success
2025-05-22 01:25:28,878 - __main__ - INFO - - Result analysis: Success
2025-05-22 01:25:28,879 - __main__ - INFO - Starting to validate system completeness...
2025-05-22 01:25:28,881 - __main__ - INFO - System validation passed: All critical components complete
2025-05-22 01:25:28,881 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.61 minutes
2025-05-22 01:25:28,882 - __main__ - INFO - Generated critical files:
2025-05-22 01:25:28,883 - __main__ - INFO - - data/processed/patient_features.csv: 61664.32 KB
2025-05-22 01:25:28,884 - __main__ - INFO - - data/processed/sepsis_labels.csv: 3966.00 KB
2025-05-22 01:25:28,885 - __main__ - INFO - - models/best_model.pt: 102722.30 KB
2025-05-22 01:25:28,886 - __main__ - INFO - - results/predictions.csv: 126.70 KB
2025-05-22 01:25:28,887 - __main__ - INFO - - results/figures/roc_curve.png: 129.57 KB
2025-05-22 01:25:28,887 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-22 01:25:28,888 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

2025-05-22 01:33:44,774 - __main__ - INFO - ================================================================================
2025-05-22 01:33:44,774 - __main__ - INFO - Sepsis Early Warning System - Starting execution
2025-05-22 01:33:44,774 - __main__ - INFO - Based on real data analysis from MIMIC-IV large clinical database
2025-05-22 01:33:44,776 - __main__ - INFO - ================================================================================
2025-05-22 01:33:44,782 - __main__ - INFO - Execution parameters: Namespace(sample=False, epochs=100, batch_size=64, skip_db=False, skip_extraction=True, skip_training=True, only_viz=False, force_real_data=False)
2025-05-22 01:33:44,946 - __main__ - INFO - System information: Windows 11 AMD64
2025-05-22 01:33:44,950 - __main__ - INFO - Checking environment settings...
2025-05-22 01:33:50,701 - __main__ - INFO - Python version: 3.12.8
2025-05-22 01:33:50,701 - __main__ - INFO - PyTorch version: 2.6.0+cu118
2025-05-22 01:33:52,382 - __main__ - INFO - GPU available: NVIDIA GeForce RTX 3060 Laptop GPU
2025-05-22 01:33:52,386 - __main__ - INFO - psycopg2 detected as installed
2025-05-22 01:33:52,387 - __main__ - INFO - Attempting to check database connection directly...
2025-05-22 01:33:52,388 - __main__ - INFO - Attempting to connect to database: 172.16.3.67:5432/mimiciv
2025-05-22 01:33:52,619 - __main__ - INFO - Database connection test successful
2025-05-22 01:33:52,708 - __main__ - INFO - Number of patients in MIMIC-IV database: 364,627
2025-05-22 01:33:52,708 - __main__ - INFO - Starting to generate MIMIC-IV derived tables...
2025-05-22 01:33:52,713 - utils.database_config - INFO - Connecting to MIMIC-IV database: 172.16.3.67:5432/mimiciv
2025-05-22 01:33:52,939 - utils.database_config - INFO - MIMIC-IV database connection successful!
2025-05-22 01:33:53,309 - __main__ - INFO - Derived tables exist and contain data: mimiciv_derived.sepsis3 (7,721,514 rows)
2025-05-22 01:33:53,311 - __main__ - INFO - Starting to generate visualizations and reports...
2025-05-22 01:33:53,313 - __main__ - INFO - Executing task: Generate visualizations and reports
2025-05-22 01:34:03,742 - __main__ - INFO - Command completed successfully: python run_visualization.py (Time: 10.43 seconds)
2025-05-22 01:34:03,742 - __main__ - INFO - Output: 2025-05-22 01:33:57,930 - __main__ - INFO - Sepsis Early Warning System Visualization Started
2025-05-22 01:33:57,934 - __main__ - INFO - Generating ROC curve...
2025-05-22 01:33:59,606 - __main__ - INFO - Generating risk trajectory chart...
2025-05-22 01:34:00,881 - __main__ - INFO - Generating confusion matrix...
2025-05-22 01:34:01,794 - __main__ - INFO - Generating feature importance chart...
2025-05-22 01:34:03,002 - __main__ - INFO - Generating HTML report...
2025-05-22 01:34:03,003 - __main__ - INFO - HTML report generated: results/sepsis_prediction_results.html
2025-05-22 01:34:03,003 - __main__ - INFO - Sepsis Early Warning System Visualization Completed
HTML report generated: results/sepsis_prediction_results.html
Visualization and report generation successful, please check the results directory
2025-05-22 01:34:03,746 - __main__ - INFO - Generated visualization file: results/sepsis_prediction_results.html (4.67 KB)
2025-05-22 01:34:03,748 - __main__ - INFO - Generated visualization file: results/figures/roc_curve.png (129.57 KB)
2025-05-22 01:34:03,749 - __main__ - INFO - Generated visualization file: results/figures/risk_trajectories.png (318.64 KB)
2025-05-22 01:34:03,749 - __main__ - INFO - Generated visualization file: results/figures/confusion_matrix.png (82.34 KB)
2025-05-22 01:34:03,751 - __main__ - INFO - Generated visualization file: results/figures/feature_importance.png (137.50 KB)
2025-05-22 01:34:03,751 - __main__ - WARNING - Expected visualization file does not exist: results/figures/model_architecture.png
2025-05-22 01:34:03,751 - __main__ - INFO - Starting to analyze model performance and results...
2025-05-22 01:34:03,751 - __main__ - INFO - Executing task: Analyze model results
2025-05-22 01:34:37,174 - __main__ - INFO - Command completed successfully: python -m scripts.analysis --full (Time: 33.42 seconds)
2025-05-22 01:34:37,177 - __main__ - INFO - Output: C:\Users\Think\AppData\Roaming\Python\Python312\site-packages\torch\nn\modules\transformer.py:508: UserWarning: The PyTorch API of nested tensors is in prototype stage and will change in the near future. We recommend specifying layout=torch.jagged when constructing a nested tensor, as this layout receives active development, has better operator coverage, and works with torch.compile. (Triggered internally at C:\actions-runner\_work\pytorch\pytorch\pytorch\aten\src\ATen\NestedTensorImpl.cpp:182.)
  output = torch._nested_tensor_from_mask(
��ʼ���а�������...
�������ݺ�ģ��...
�ӱ����ļ���������...
���Դ�·������ģ��: models/best_model.pt
���Դ�·���������ݼ��ָ�: models/dataset_splits.pt
�ɹ����ز��Լ����������� 150 ������
Ԥ�������ݣ������������ݼ�...
Ԥ������������...
��������������: ['heart_rate', 'respiratory_rate', 'systolic_bp', 'diastolic_bp', 'temperature', 'spo2'] (ȱʧ: set())
����ʵ���Ҽ����: ['wbc', 'lactate', 'creatinine', 'platelet'] (ȱʧ: {'bilirubin'})
����ҩ����: ['antibiotic_1', 'antibiotic_2', 'antibiotic_3', 'antibiotic_4', 'antibiotic_5', 'vasopressor_1', 'vasopressor_2', 'vasopressor_3', 'vasopressor_4'] (ȱʧ: set())
������״ - ��������: (75284, 6), ʵ���Ҽ��: (75284, 5), ҩ��: (75284, 9), �ı�Ƕ��: (75284, 768)
��������: 75284, ��������: 1000
�������������״:
- vitals: (1000, 72, 6)
- labs: (1000, 72, 5)
- drugs: (1000, 72, 9)
- text_embeds: (1000, 72, 768)
- kg_embeds: (1000, 64)
- time_indices: (1000, 72)
- targets: (1000, 72)
��ʼģ�ͽ��ͷ���...
���ɷ���ʱ����...
���� 10760601 �ķ���ʱ�����ѱ���
���� 10760601 ��������Ҫ���ѱ���
���� 14746396 �ķ���ʱ�����ѱ���
���� 14746396 ��������Ҫ���ѱ���
���� 16693092 �ķ���ʱ�����ѱ���
���� 16693092 ��������Ҫ���ѱ���
���� 15981789 �ķ���ʱ�����ѱ���
���� 15981789 ��������Ҫ���ѱ���
���� 13085252 �ķ���ʱ�����ѱ���
���� 13085252 ��������Ҫ���ѱ���
�����������
�����������
2025-05-22 01:34:37,183 - __main__ - INFO - Process execution status:
2025-05-22 01:34:37,183 - __main__ - INFO - - Database derived tables: Success
2025-05-22 01:34:37,185 - __main__ - INFO - - Result visualization: Success
2025-05-22 01:34:37,185 - __main__ - INFO - - Result analysis: Success
2025-05-22 01:34:37,185 - __main__ - INFO - Starting to validate system completeness...
2025-05-22 01:34:37,187 - __main__ - INFO - System validation passed: All critical components complete
2025-05-22 01:34:37,187 - __main__ - INFO - Sepsis Early Warning System - Execution completed, Total time: 0.87 minutes
2025-05-22 01:34:37,187 - __main__ - INFO - Generated critical files:
2025-05-22 01:34:37,190 - __main__ - INFO - - data/processed/patient_features.csv: 61664.32 KB
2025-05-22 01:34:37,191 - __main__ - INFO - - data/processed/sepsis_labels.csv: 3966.00 KB
2025-05-22 01:34:37,192 - __main__ - INFO - - models/best_model.pt: 102722.30 KB
2025-05-22 01:34:37,192 - __main__ - INFO - - results/predictions.csv: 133.51 KB
2025-05-22 01:34:37,192 - __main__ - INFO - - results/figures/roc_curve.png: 129.57 KB
2025-05-22 01:34:37,195 - __main__ - INFO - - results/sepsis_prediction_results.html: 4.67 KB
2025-05-22 01:34:37,196 - __main__ - INFO - 
Sepsis Early Warning System completed execution. System has the following features:
1. Large dataset: Extracted data from MIMIC-IV includes data from many real patients
2. High-quality training: Used 100 rounds of training, with learning rate scheduling and early stopping
3. Advanced model architecture: Used neural network structure with multimodal fusion
4. Detailed visualizations: Provided risk trajectories, feature importance, etc.
5. Complete HTML report: Help doctors interpret model results

Complete results can be viewed in the results directory, especially:
- results/figures/: Various visualizations and performance charts

